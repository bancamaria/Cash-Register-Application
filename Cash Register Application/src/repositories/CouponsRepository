package repositories;
import model.Coupons;
import java.util.Set;
import java.util.TreeSet;

public class CouponsRepository {
    private Set<Coupons> coupons;

    public CouponsRepository() {
        coupons = new TreeSet<>();
    }

    public Set<Coupons> getCoupons() {
        return coupons;
    }

    public boolean add(Coupons c) {
        return coupons.add(c);
    }

    public boolean remove(int id) {
        Coupons c = getCouponsById(id);
        if (c == null)
            return false;
        return coupons.remove(c);
    }

    public Coupons getCouponsById(int id) {
        for (Coupons c : coupons) {
            if (id == c.getId())
                return c;
        }
        return null;
    }

    public Set<Coupons> getCouponsByDiscount(float discount) {
        Set<Coupons> result = null;
        for (Coupons c : coupons) {
            if (Float.compare(discount, c.getDiscount()) == 0) {
                if (result == null)
                    result = new TreeSet<>();
                result.add(c);
            }
        }
        return result;
    }

    public boolean setCouponsDiscount(int id, float discount) {
        Coupons c = getCouponsById(id);
        if (c == null)
            return false;
        c.setDiscount(discount);
        return true;
    }

    public Set<Coupons> getCouponsByUsedState(boolean state) {
        Set<Coupons> result = null;
        for (Coupons c : coupons) {
            if (state == c.isUsed()) {
                if (result == null)
                    result = new TreeSet<>();
                result.add(c);
            }
        }
        return result;
    }

    public boolean setCouponsUsedState(int id, boolean state) {
        Coupons c = getCouponsById(id);
        if (c == null)
            return false;
        c.setUsed(state);
        return true;
    }
}